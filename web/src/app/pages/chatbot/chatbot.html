<div class="card">
	<div class="card-header">
		<h1>OpenAI Test</h1>
	</div>

	<div class="card-body" style="min-height: 700px;">
		<div class="d-flex flex-column ps-4 pt-3">
			<label style="width: 100%; max-width: 800px;">
				Insert Prompt here:
				<div class="d-flex flex-row">
					<textarea
						class="form-control mb-3"
						placeholder="Enter your prompt"
						[(ngModel)]="prompt"
						rows="3"
						[disabled]="isLoading"
					></textarea>
					<button 
						class="btn btn-primary ms-2" 
						style="height: 38px; align-self: flex-start;"
						(click)="submitPrompt()"
						[disabled]="isLoading || !prompt.trim()"
					>
						<span *ngIf="!isLoading">Submit</span>
						<span *ngIf="isLoading">
							<span class="spinner-border spinner-border-sm me-1" role="status"></span>
							Processing...
						</span>
					</button>
				</div>
			</label>

			<!-- Error Display -->
			<div *ngIf="error" class="alert alert-danger mb-3" role="alert">
				{{ error }}
			</div>

			<!-- Response Display -->
			<label *ngIf="response || isLoading">
				Answer:
				<div class="card mt-2">
					<div class="card-body">
						<div *ngIf="isLoading" class="text-center">
							<div class="spinner-border" role="status">
								<span class="visually-hidden">Loading...</span>
							</div>
							<p class="mt-2">Getting response from OpenAI...</p>
						</div>
						<div *ngIf="response && !isLoading" class="response-text">
							{{ response }}
						</div>
					</div>
				</div>
			</label>
		</div>
	</div>
</div>